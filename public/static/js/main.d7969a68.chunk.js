/*! For license information please see main.d7969a68.chunk.js.LICENSE.txt */
(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),i=(a(16),a(9)),s=a(1);var l=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header__logo"}))};var m=function(e){return o.a.createElement("section",{className:"popup popup_".concat(e.name," ").concat(e.isOpen?"popup_open":"")},o.a.createElement("div",{className:"popup__edit popup__edit_".concat(e.type)},o.a.createElement("form",{noValidate:!0,name:"formChange",className:"form form_".concat(e.formType),action:"#",method:"post"},o.a.createElement("h2",{className:"form__title ".concat(e.agree)},e.formTitle),e.children,o.a.createElement("button",{name:"buttonChangeSave",className:"form__button ".concat(e.typeButton),"aria-label":"".concat(e.typeButton)},e.buttonName)),o.a.createElement("button",{onClick:e.onClose,name:"buttonChangeClose",type:"button",className:"popup__close"})))},u=a(4),p=a(5),_=a(10),d=a(8),f=function(e){Object(_.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return o.a.createElement("section",{className:"popup ".concat(Object.keys(this.props.card).length>0?"popup_open":"")},o.a.createElement("div",{className:"pop-image"},o.a.createElement("div",{className:"pop-image__container"},o.a.createElement("img",{className:"pop-image__image",src:this.props.card.link,alt:""}),o.a.createElement("p",{className:"pop-image__about"},this.props.card.name),o.a.createElement("button",{type:"button",onClick:this.props.onClose,className:"popup__close pop-image__close"}))))}}]),a}(o.a.Component),h=o.a.createContext();function b(e){var t=o.a.useContext(h),a=e.card.owner._id===t._id,n="element__delete ".concat(a?"":"element__delete_hidden"),r=e.card.likes.some((function(e){return e._id===t._id})),c="element__like ".concat(r?"element__like_black":"");return o.a.createElement("li",{className:"element"},o.a.createElement("img",{className:"element__photo",src:"".concat(e.card.link),onClick:function(){e.onCardClick(e.card)},alt:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u043e\u0442\u043e"}),o.a.createElement("div",{className:"element__info"},o.a.createElement("h2",{className:"element__name"},e.card.name),o.a.createElement("div",{className:"element__data"},o.a.createElement("button",{type:"button",className:c,onClick:function(){e.onCardLike(e.card)},"aria-label":"\u041b\u0430\u0439\u043a"}),o.a.createElement("p",{className:"element__counter"},"".concat(e.card.likes.length)))),o.a.createElement("button",{type:"button",className:n,onClick:function(){e.onCardDelete(e.card)},"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}var E=function(e){var t=o.a.useContext(h),a=o.a.useState(""),n=Object(s.a)(a,2),r=n[0],c=n[1],i=o.a.useState(""),l=Object(s.a)(i,2),m=l[0],u=l[1];return o.a.useEffect((function(){c(t.name),u(t.about)}),[t]),o.a.createElement("section",{className:"popup popup_info ".concat(e.isOpen?"popup_open":"")},o.a.createElement("div",{className:"popup__edit popup__edit_changeName"},o.a.createElement("form",{noValidate:!0,name:"formChange",className:"form form_change",action:"#",method:"post"},o.a.createElement("h2",{className:"form__title"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),o.a.createElement("input",{id:"name-input",name:"inputChangeName",required:!0,className:"form__input form__input_el_name",type:"text",minLength:"2",maxLength:"40",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:r,onChange:function(e){c(e.target.value)}}),o.a.createElement("span",{id:"name-input-error",className:"form__input-error form__input-error_el_name"}),o.a.createElement("input",{id:"job-input",name:"inputChangeJob",required:!0,className:"form__input form__input_el_spec",type:"text",minLength:"2",maxLength:"200",placeholder:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f",value:m,onChange:function(e){u(e.target.value)}}),o.a.createElement("span",{id:"job-input-error",className:"form__input-error form__input-error_el_spec"}),o.a.createElement("button",{name:"buttonChangeSave",className:"form__button",onClick:function(t){t.preventDefault(),e.onSubmit(r,m),c(""),u(""),e.onClose()},"aria-label":"save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),o.a.createElement("button",{onClick:e.onClose,name:"buttonChangeClose",type:"button",className:"popup__close"})))};var g=function(e){var t=o.a.useRef();return o.a.createElement("section",{className:"popup popup_updatePhoto ".concat(e.isOpen?"popup_open":"")},o.a.createElement("div",{className:"popup__edit popup__edit_update"},o.a.createElement("form",{noValidate:!0,name:"formChange",className:"form form_update",action:"#",method:"post"},o.a.createElement("h2",{className:"form__title ".concat(e.agree)},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),o.a.createElement("input",{id:"job-input",name:"inputChangeJob",ref:t,required:!0,className:"form__input form__input_el_spec",type:"text",minLength:"2",maxLength:"200",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430"}),o.a.createElement("span",{id:"job-input-error",className:"form__input-error form__input-error_el_spec"}),o.a.createElement("button",{name:"buttonChangeSave",className:"form__button",onClick:function(a){a.preventDefault(),e.onSubmit(t.current.value),e.onClose()},"aria-label":"update"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),o.a.createElement("button",{onClick:e.onClose,name:"buttonChangeClose",type:"button",className:"popup__close"})))};var v=function(e){var t=o.a.useRef(),a=o.a.useRef();return o.a.createElement("section",{className:"popup popup_new ".concat(e.isOpen?"popup_open":"")},o.a.createElement("div",{className:"popup__edit popup__edit_newPlace"},o.a.createElement("form",{noValidate:!0,name:"formChange",className:"form form_new",action:"#",method:"post"},o.a.createElement("h2",{className:"form__title ".concat(e.agree)},"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),o.a.createElement("input",{id:"name-input",name:"inputChangeName",required:!0,className:"form__input form__input_el_name",type:"text",minLength:"2",maxLength:"40",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",ref:t}),o.a.createElement("span",{id:"name-input-error",className:"form__input-error form__input-error_el_name"}),o.a.createElement("input",{id:"job-input",name:"inputChangeJob",required:!0,className:"form__input form__input_el_spec",type:"text",minLength:"2",maxLength:"200",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",ref:a}),o.a.createElement("span",{id:"job-input-error",className:"form__input-error form__input-error_el_spec"}),o.a.createElement("button",{name:"buttonChangeSave",className:"form__button",onClick:function(n){n.preventDefault(),e.onSubmit(t.current.value,a.current.value),e.onClose()},"aria-label":""},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")),o.a.createElement("button",{onClick:e.onClose,name:"buttonChangeClose",type:"button",className:"popup__close"})))};var C=function(e){var t=o.a.useContext(h);function a(t){e.onCardLike(t)}function n(t){e.onDeleteCards(t)}return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{style:{backgroundImage:"url(".concat(t.avatar,")")},className:"profile__avatar"},o.a.createElement("button",{onClick:e.onEditAvatar,className:"profile__changeImageButton"})),o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__name"},t.name),o.a.createElement("button",{onClick:e.onEditProfile,type:"button",className:"profile__edit","aria-label":"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u0444\u043e\u0440\u043c\u044b"}),o.a.createElement("p",{className:"profile__about"},t.about)),o.a.createElement("button",{onClick:e.onAddPlace,type:"button",className:"profile__button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"})),o.a.createElement("section",{className:"gallery"},o.a.createElement("ul",{className:"elements"},e.cards.map((function(t,r){return o.a.createElement(b,{onCardLike:a,onCardDelete:n,card:t,key:r,onCardClick:e.onCardClick})})))),o.a.createElement(E,{isOpen:e.isEditProfilePopupOpen,onClose:e.onClose,onSubmit:function(t,a){e.onUpdateUser({profileName:t,profileJob:a})}}),o.a.createElement(f,{card:e.selectedCard,onClose:e.onClose}),o.a.createElement(v,{isOpen:e.isAddPlacePopupOpen,onClose:e.onClose,onSubmit:function(t,a){e.onUpdateCards(t,a)}}),o.a.createElement(m,{name:"agreement",type:"agree",formType:"sure",agree:"form__title_agree",formTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",typeButton:"agree",buttonName:"\u0414\u0430"}),o.a.createElement(g,{isOpen:e.isEditAvatarPopupOpen,onClose:e.onClose,onSubmit:function(t){e.onUpdateAvatar(t)}}))};var N=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__text"},"\xa9 2020 Mesto Russia"))},k=new(function(){function e(t){var a=t.baseURL,n=t.headers;Object(u.a)(this,e),this.baseURL=a,this.headers=n}return Object(p.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getItems",value:function(e){var t=this;return fetch("".concat(e),{headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteItem",value:function(e,t){var a=this;return fetch("".concat(e,"/").concat(t),{method:"DELETE",headers:this.headers}).then((function(e){return a._getResponseData(e)}))}},{key:"createItem",value:function(e,t,a){var n=this;return fetch("".concat(e),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:a})}).then((function(e){return n._getResponseData(e)}))}},{key:"putLike",value:function(e,t){var a=this;return fetch("".concat(e,"/").concat(t),{method:"PUT",headers:this.headers}).then((function(e){return a._getResponseData(e)}))}},{key:"removeLike",value:function(e,t){var a=this;return fetch("$".concat(e,"/").concat(t),{method:"DELETE",headers:this.headers}).then((function(e){return a._getResponseData(e)}))}},{key:"getUserInformation",value:function(e){var t=this;return fetch("".concat(e),{headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"profileEditing",value:function(e,t,a){var n=this;return fetch("".concat(e),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:a})}).then((function(e){return n._getResponseData(e)}))}},{key:"avatarEditing",value:function(e,t){var a=this;return fetch("".concat(e),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(e){return a._getResponseData(e)}))}}]),e}())({baseURL:"https://mesto.nomoreparties.co/v1/cohort-14",headers:{"Content-Type":"application/json",authorization:"42b45684-18cf-461b-be7b-02246c8d8e0d"}});var y=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),c=Object(s.a)(r,2),m=c[0],u=c[1],p=o.a.useState(!1),_=Object(s.a)(p,2),d=_[0],f=_[1],b=o.a.useState({}),E=Object(s.a)(b,2),g=E[0],v=E[1],y=o.a.useState({}),O=Object(s.a)(y,2),j=O[0],L=O[1],P=o.a.useState([]),S=Object(s.a)(P,2),D=S[0],x=S[1];return o.a.useEffect((function(){Promise.all([k.getUserInformation("users/me"),k.getItems("cards")]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];x(n),L(a)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e))}))}),[]),o.a.createElement(h.Provider,{value:j},o.a.createElement("div",{className:"page"},o.a.createElement(l,null),o.a.createElement(C,{onEditAvatar:function(){f(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},onCardClick:function(e){v(e)},onClose:function(){u(!1),f(!1),n(!1),v({})},isEditProfilePopupOpen:a,isAddPlacePopupOpen:m,isEditAvatarPopupOpen:d,selectedCard:g,cards:D,onDeleteCards:function(e){k.deleteItem("cards",e._id).then((function(){var t=D.filter((function(t){return t._id!==e._id}));x(t)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e))}))},onUpdateUser:function(e){var t=e.profileName,a=e.profileJob;k.profileEditing("users/me",t,a).then((function(e){L(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e))}))},onUpdateAvatar:function(e){k.avatarEditing("users/me/avatar",e).then((function(e){L(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e))}))},onCardLike:function(e){e.likes.some((function(e){return e._id===j._id}))?k.removeLike("cards/likes",e._id).then((function(t){var a=D.map((function(a){return a._id===e._id?t:a}));x(a)})):k.putLike("cards/likes",e._id).then((function(t){var a=D.map((function(a){return a._id===e._id?t:a}));x(a)}))},onUpdateCards:function(e,t){k.createItem("cards",e,t).then((function(e){x([].concat(Object(i.a)(D),[e]))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e))}))}}),o.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.d7969a68.chunk.js.map